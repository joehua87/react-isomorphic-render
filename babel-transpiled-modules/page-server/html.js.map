{"version":3,"sources":["../../source/page-server/html.js"],"names":[],"mappings":"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","file":"html.js","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport ReactDOMServer from 'react-dom/server'\n\nimport { server_generated_webpage_head } from '../webpage head'\nimport { get_language_from_locale } from '../helpers'\n\n/**\n * Wrapper component containing HTML metadata and boilerplate tags.\n * Used in server-side code only to wrap the string output of the\n * rendered route component.\n *\n * The only thing this component doesn't (and can't) include is the\n * HTML doctype declaration, which is added to the rendered output\n * by the server.js file.\n */\nexport default class Html extends Component\n{\n\tstatic propTypes =\n\t{\n\t\tdevelopment : PropTypes.bool,\n\t\tassets      : PropTypes.object.isRequired,\n\t\tcontent     : PropTypes.node,\n\t\tstore       : PropTypes.object.isRequired,\n\t\thead        : PropTypes.func,\n\t\tbody        : PropTypes.func,\n\t\tstyle       : PropTypes.func,\n\t\tlocale      : PropTypes.string,\n\t\tentry_point : PropTypes.string.isRequired\n\t}\n\n\trender()\n\t{\n\t\tconst { development, assets, store, head, body, style, locale, entry_point } = this.props\n\n\t\t// when server-side rendering is disabled, content will be undefined\n\t\t// (but server-side rendering is always enabled so this \"if\" condition may be removed)\n\t\tlet content_markup = this.props.children ? ReactDOMServer.renderToString(this.props.children) : ''\n\n\t\tlet content_element = <div id=\"react_markup\" dangerouslySetInnerHTML={{__html: content_markup}}/>\n\n\t\tif (body)\n\t\t{\n\t\t\tcontent_element = body(content_element)\n\t\t}\n\n\t\tconst html = \n\t\t(\n\t\t\t<html lang={locale ? get_language_from_locale(locale) : ''}>\n\t\t\t\t<head>\n\t\t\t\t\t{/* webpage title and various meta tags */}\n\t\t\t\t\t{server_generated_webpage_head()}\n\n\t\t\t\t\t{/* (will be done only in production mode\n\t\t\t\t\t     with webpack extract text plugin) \n\n\t\t\t\t\t    mount CSS stylesheets for all entry points\n\t\t\t\t\t    (should have been \"for the current entry point only\")\n\n\t\t\t\t\t    (currently there is only one entry point: \"main\";\n\t\t\t\t\t     and also the \"common\" chunk) */}\n\t\t\t\t\t{Object.keys(assets.styles).map((style, i) =>\n\t\t\t\t\t\t<link \n\t\t\t\t\t\t\thref={assets.styles[style]} \n\t\t\t\t\t\t\tkey={i} \n\t\t\t\t\t\t\tmedia=\"screen, projection\"\n\t\t\t\t\t\t\trel=\"stylesheet\" \n\t\t\t\t\t\t\ttype=\"text/css\"\n\t\t\t\t\t\t\tcharSet=\"UTF-8\"/>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* (will be done only in development mode)\n\n\t\t\t\t\t    resolves the initial style flash (flicker) \n\t\t\t\t\t    on page load in development mode \n\t\t\t\t\t    (caused by Webpack style-loader mounting CSS styles \n\t\t\t\t\t     through javascript after page load)\n\t\t\t\t\t    by mounting the entire CSS stylesheet in a <style/> tag */}\n\t\t\t\t\t{ development && style ? <style dangerouslySetInnerHTML={{__html: style()}} charSet=\"UTF-8\"/> : null }\n\n\t\t\t\t\t{ head ? head() : null }\n\n\t\t\t\t\t{ assets.icon ? <link rel=\"shortcut icon\" href={assets.icon}/> : null }\n\t\t\t\t</head>\n\n\t\t\t\t<body>\n\t\t\t\t\t{/* React page content */}\n\t\t\t\t\t{content_element}\n\n\t\t\t\t\t{/* locale for international messages */}\n\t\t\t\t\t<script dangerouslySetInnerHTML={{__html: `window._locale=${JSON.stringify(locale)}`}} charSet=\"UTF-8\"/>\n\n\t\t\t\t\t{/* Flux store data will be reloaded into the store on the client */}\n\t\t\t\t\t<script dangerouslySetInnerHTML={{__html: `window._flux_store_data=${JSON.stringify(store.getState())}`}} charSet=\"UTF-8\"/>\n\n\t\t\t\t\t{/* javascripts */}\n\n\t\t\t\t\t{/* the \"common.js\" chunk (see webpack extract commons plugin) */}\n\t\t\t\t\t{/* (needs to be included first (by design)) */}\n\t\t\t\t\t{ (assets.javascript && assets.javascript.common) ? <script src={assets.javascript.common} charSet=\"UTF-8\"/> : null }\n\t\t\t\t\t\n\t\t\t\t\t{/* current application \"entry\" point javascript\n\t\t\t\t\t    (currently there is only one entry point: \"main\") */}\n\t\t\t\t\t<script src={assets.javascript[entry_point]} charSet=\"UTF-8\"/>\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t)\n\n\t\treturn html\n\t}\n}"]}