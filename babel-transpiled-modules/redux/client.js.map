{"version":3,"sources":["../../source/redux/client.js"],"names":[],"mappings":";;;;;;;;qBAAkB,OAAO;;;;sBAEF,UAAU;;wBACV,aAAa;;;;uBACb,YAAY;;qBAEpB,UAAS,IAA4G,EACpI;KAD0B,WAAW,GAAb,IAA4G,CAA1G,WAAW;KAAE,iBAAiB,GAAhC,IAA4G,CAA7F,iBAAiB;KAAE,EAAE,GAApC,IAA4G,CAA1E,EAAE;KAAE,YAAY,GAAlD,IAA4G,CAAtE,YAAY;KAAE,aAAa,GAAjE,IAA4G,CAAxD,aAAa;KAAE,cAAc,GAAjF,IAA4G,CAAzC,cAAc;KAAE,uBAAuB,GAA1G,IAA4G,CAAzB,uBAAuB;;;;AAIjI,KAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAA;;AAE7B,KAAI,MAAM,EACV;AACC,SAAO,MAAM,CAAC,OAAO,CAAA;EACrB;;;AAGD,KAAM,KAAK,GAAG,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,gBAAgB,EAAE,aAAa,EAAb,aAAa,EAAE,CAAC,CAAA;AAC5E,QAAO,MAAM,CAAC,gBAAgB,CAAA;;AAE9B,UAAS,YAAY,GACrB;;;AAGC,SAAO,eACN;AACA,cAAW,EAAX,WAAW;AACX,SAAM,EAAG,gBAAC,OAAO,EAAE,KAAK,EACxB;AACC,WAAO,aAAY,UAAC,OAAO,EAAE,MAAM,EACnC;;AAEC,SAAI,MAAM,EACV;AACC,UAAI,CAAC,uBAAuB,EAC5B;AACC,aAAM,IAAI,KAAK,uPAG6C,CAAA;OAC5D;;AAED,6BAAuB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAA,QAAQ,EAC7C;AACC,YAAK,CAAC,MAAM,GAAK,MAAM,CAAA;AACvB,YAAK,CAAC,QAAQ,GAAG,QAAQ,CAAA;;AAEzB,aAAM,EAAE,CAAA;OACR,CAAC,CAAA;MACF,MAED;AACC,YAAM,EAAE,CAAA;MACR;;AAED,cAAS,MAAM,GACf;AACC,UAAI,eAAe,GAAG,mBAAM,aAAa,CAAC,cAAc,EAAE,KAAK,EAAE,OAAO,CAAC,CAAA;;AAEzE,UAAI,CAAC,iBAAiB,EACtB;AACC,cAAO,OAAO,CAAC,eAAe,CAAC,CAAA;OAC/B;;;;;;;AAOD,cAAQ,CAAC,MAAM,CAAC,eAAe,EAAE,iBAAiB,CAAC,CAAA;;AAEnD,aAAO,CAAC,GAAG,2JAAyJ,CAAA;;AAEpK,aAAO,CAEN;;;OACE,eAAe;OAChB,mDAAY;OACP,CACL,CAAA;MACF;KACD,CAAC,CAAA;IACF;AACD,gBAAa,EAAb,aAAa;AACb,QAAK,EAAL,KAAK;AACL,KAAE,EAAE,EAAE,IAAI,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC;GACjD,CAAC,CAAA;EACF;;;;AAID,QAAO,YAAY,EAAE,CAAC,IAAI,CAAC,UAAA,SAAS;SAAK,EAAE,QAAQ,EAAE,YAAY,EAAE;EAAC,CAAC,CAAA;CACrE","file":"client.js","sourcesContent":["import React from 'react'\n\nimport { client } from './render'\nimport dev_tools  from './dev tools'\nimport { exists } from '../helpers'\n\nexport default function({ development, development_tools, to, create_store, create_routes, markup_wrapper, load_localized_messages })\n{\n\t// international\n\n\tconst locale = window._locale\n\n\tif (locale)\n\t{\n\t\tdelete window._locale\n\t}\n\n\t// create Redux store\n\tconst store = create_store({ data: window._flux_store_data, create_routes })\n\tdelete window._flux_store_data\n\n\tfunction render_react()\n\t{\n\t\t// returns a Promise for React component.\n\t\t//\n\t\treturn client\n\t\t({\n\t\t\tdevelopment,\n\t\t\trender : (element, props) =>\n\t\t\t{\n\t\t\t\treturn new Promise((resolve, reject) =>\n\t\t\t\t{\n\t\t\t\t\t// international\n\t\t\t\t\tif (locale)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!load_localized_messages)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthrow new Error(`You are supposed to pass \n\t\t\t\t\t\t\t\t\"load_localized_messages(locale) => Promise\" function \n\t\t\t\t\t\t\t\tas a parameter to client-side rendering function call\n\t\t\t\t\t\t\t\tbecause you opted into using internationalization feature`)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tload_localized_messages(locale).then(messages =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprops.locale   = locale\n\t\t\t\t\t\t\tprops.messages = messages\n\n\t\t\t\t\t\t\trender()\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\trender()\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction render()\n\t\t\t\t\t{\n\t\t\t\t\t\tlet wrapped_element = React.createElement(markup_wrapper, props, element)\n\n\t\t\t\t\t\tif (!development_tools)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn resolve(wrapped_element)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Render dev tools after initial client render to prevent warning\n\t\t\t\t\t\t// \"React attempted to reuse markup in a container but the checksum was invalid\"\n\t\t\t\t\t\t// https://github.com/erikras/react-redux-universal-hot-example/pull/210\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// (practically does nothing)\n\t\t\t\t\t\tReactDOM.render(wrapped_element, content_container)\n\n\t\t\t\t\t\tconsole.log(`You are gonna see a warning about \"React.findDOMNode is deprecated\" in the console. It's normal: redux_devtools hasn't been updated to React 0.14 yet`)\n\n\t\t\t\t\t\tresolve\n\t\t\t\t\t\t((\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{wrapped_element}\n\t\t\t\t\t\t\t\t<dev_tools/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tcreate_routes,\n\t\t\tstore,\n\t\t\tto: to || document.getElementById('react_markup')\n\t\t})\n\t}\n\n\t// render page (on the client side)\n\t//\n\treturn render_react().then(component => ({ rerender: render_react }))\n}"]}